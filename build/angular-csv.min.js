/*! angular-csv 14-05-2014 */
angular.module("angularCsv.config",[]).value("angularCsv.config",{debug:!0}).config(["$compileProvider",function(a){angular.isDefined(a.urlSanitizationWhitelist)?a.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/):a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}]);var angularCsv=angular.module("angularCsv",["angularCsv.config","ngSanitize"]);angularCsv.directive("angularCsv",["angularCsvHelper",function(a){return{restrict:"AC",scope:{csvData:"&csv",csvFilename:"@",csvHeader:"&",csvDelimiter:"@",csvSeparator:"@"},link:function(b,c){c.bind("click",function(){a.save(b.csvData(),{filename:b.csvFilename,header:b.csvHeader(),delimiter:b.csvDelimiter,separator:b.csvSeparator})})}}}]),angularCsv.factory("angularCsvHelper",function(a){"use strict";var b={makeDefaults:function(a){return a.separator=a.separator||",",a.filename=a.filename||"data.csv",a},makeDataArray:function(a,c){c=b.makeDefaults(c);var d=[];return c.header&&(a=[c.header].concat(a)),angular.forEach(a,function(a){var b=[];angular.forEach(a,function(a){"string"==typeof a&&c.delimiter&&(a=c.delimiter+a+c.delimiter),this.push(a)},b),this.push(b)},d),d},makeCsvString:function(a,c){c=b.makeDefaults(c);var d="data:text/csv;charset=utf-8,";return angular.forEach(a,function(a){d+=a.join(c.separator)+"\r\n"}),encodeURI(d)},makeAnchor:function(a,c){c=b.makeDefaults(c);var d=angular.element("<a></a>");return d.attr("download",c.filename),d.attr("href",a),d.css("visibility","hidden"),d.css("position","absolute"),d},appendElement:function(b){var c=angular.element(a[0].body);c.append(b)},save:function(a,c){c=b.makeDefaults(c);var d=b.makeDataArray(a,c),e=b.makeCsvString(d,c),f=b.makeAnchor(e,c);b.appendElement(f),f[0].click(),f.remove()}};return b});